<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Installation &mdash; ELECTRIC  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="https://cdn.datatables.net/1.10.22/css/jquery.dataTables.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=5929fcd5"></script>
        <script src="_static/doctools.js?v=888ff710"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="https://3dmol.org/build/3Dmol-min.js"></script>
        <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
        <script src="https://cdn.datatables.net/1.10.22/js/jquery.dataTables.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Usage" href="usage.html" />
    <link rel="prev" title="ELECTRIC" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            ELECTRIC
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#compiling-mdi-tinker-and-electric">Compiling MDI-Tinker and ELECTRIC</a></li>
<li class="toctree-l2"><a class="reference internal" href="#python-dependencies">Python Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="#testing-your-installation">Testing Your Installation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">ELECTRIC</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Installation</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/installation.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="installation">
<h1>Installation<a class="headerlink" href="#installation" title="Link to this heading"></a></h1>
<section id="compiling-mdi-tinker-and-electric">
<h2>Compiling MDI-Tinker and ELECTRIC<a class="headerlink" href="#compiling-mdi-tinker-and-electric" title="Link to this heading"></a></h2>
<p>Installation of ELECTRIC and MDI-enabled Tinker are bundled in one convenient build script.</p>
<p>To install ELECTRIC and MDI-enabled Tinker, you should have cmake and a fortran compiler installed. Then, you can download and build ELECTRIC and MDI-enabled Tinker using the following command in your terminal. Make sure you are in the directory where you want your ELECTRIC driver to be. You should note this location, because you will need to specify the path to some files built during this process in order to perform analysis.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>--recurse-submodules<span class="w"> </span>https://github.com/WelbornGroup/ELECTRIC.git
<span class="nb">cd</span><span class="w"> </span>ELECTRIC
./build.sh
</pre></div>
</div>
<p>This will download and build ELECTRIC and MDI-enabled Tinker.</p>
<p>Upon successful building, you will have the ELECTRIC driver in ELECTRIC/ELECTRIC/ELECTRIC.py, and the needed Tinker executable (dynamic.x) in ELECTRIC/modules/Tinker/build/tinker/source/dynamic.x . The location of these files can be found in text files in ELECTRIC/test/locations/ELECTRIC and ELECTRIC/test/locations/Tinker_ELECTRIC. You will need these for using ELECTRIC.</p>
</section>
<section id="python-dependencies">
<h2>Python Dependencies<a class="headerlink" href="#python-dependencies" title="Link to this heading"></a></h2>
<p>In order to run ELECTRIC, you will need to be in a python environment which has numpy and pandas installed. If you want to run ELECTRIC with more than one engine, you should also install MPI4Py. We recommend installing these packages in a conda environment created for ELECTRIC analysis.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda<span class="w"> </span>install<span class="w"> </span>-c<span class="w"> </span>anaconda<span class="w"> </span>mpi4py
conda<span class="w"> </span>install<span class="w"> </span>-c<span class="w"> </span>conda-forge<span class="w"> </span>numpy<span class="w"> </span>pandas
</pre></div>
</div>
</section>
<section id="testing-your-installation">
<h2>Testing Your Installation<a class="headerlink" href="#testing-your-installation" title="Link to this heading"></a></h2>
<p>You can now run a quick test of the driver by changing directory to the <cite>ELECTRIC/test/bench5</cite> directory and running the <cite>tcp.sh</cite> script:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./tcp.sh
</pre></div>
</div>
<p>This script will run a short Tinker dynamics simulation that includes periodic boundary conditions. This command is on line 20 of the provided file. This is a standard Tinker call, as you would normally run a simulation. If you are performing post processing on a simulation, you will not use this line.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="si">${</span><span class="nv">TINKER_LOC</span><span class="si">}</span><span class="w"> </span>bench5<span class="w"> </span>-k<span class="w"> </span>bench5.key<span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">1</span>.0<span class="w"> </span><span class="m">0</span>.001999<span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">300</span>.00<span class="w"> </span>&gt;<span class="w"> </span>Dynamics.log
</pre></div>
</div>
<p>The script then launches an instance of Tinker as an MDI engine, which will request a connection to the driver and then listen for commands from the driver. This command is similar to running a simulation with Tinker, except that it uses a modified Tinker input file (more on this below), and adds an additional command line argument which passes information to MDI (<cite>-mdi “role ENGINE -name NO_EWALD -method TCP -port 8022 -hostname localhost”</cite>):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="si">${</span><span class="nv">TINKER_LOC</span><span class="si">}</span><span class="w"> </span>bench5<span class="w"> </span>-k<span class="w"> </span>no_ewald.key<span class="w"> </span>-mdi<span class="w"> </span><span class="s2">&quot;-role ENGINE -name NO_EWALD -method TCP -port 8022 -hostname localhost&quot;</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">1</span>.0<span class="w"> </span><span class="m">0</span>.001999<span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">300</span>.00<span class="w"> </span>&gt;<span class="w"> </span>no_ewald.log<span class="w"> </span><span class="p">&amp;</span>
</pre></div>
</div>
<p>The script will then launch an instance of the driver in the background, which will listen for connections from an MDI engine:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span><span class="si">${</span><span class="nv">DRIVER_LOC</span><span class="si">}</span><span class="w"> </span>-probes<span class="w"> </span><span class="s2">&quot;1 40&quot;</span><span class="w"> </span>-snap<span class="w"> </span>bench5.arc<span class="w"> </span>-mdi<span class="w"> </span><span class="s2">&quot;-role DRIVER -name driver -method TCP -port 8022&quot;</span><span class="w"> </span>--bymol<span class="w"> </span><span class="p">&amp;</span>
</pre></div>
</div>
<p>The driver’s output should match the reference output file (<cite>proj_totfield.csv</cite>) in the <cite>sample_analysis</cite> directory.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="ELECTRIC" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="usage.html" class="btn btn-neutral float-right" title="Usage" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, Jessica A. Nash, Taylor A. Barnes, Valerie Vaissier Welborn.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>