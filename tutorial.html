<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tutorial &mdash; ELECTRIC  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="https://cdn.datatables.net/1.10.22/css/jquery.dataTables.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=5929fcd5"></script>
        <script src="_static/doctools.js?v=888ff710"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="_static/copybutton.js?v=f281be69"></script>
        <script src="https://3dmol.org/build/3Dmol-min.js"></script>
        <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
        <script src="https://cdn.datatables.net/1.10.22/js/jquery.dataTables.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Usage" href="usage.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            ELECTRIC
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Usage</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#running-an-electric-calculation">Running an ELECTRIC calculation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#preparing-files">Preparing Files</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#simulation-parameter-file">Simulation Parameter File</a></li>
<li class="toctree-l4"><a class="reference internal" href="#tinker-input-file">Tinker input file</a></li>
<li class="toctree-l4"><a class="reference internal" href="#bash-script-run-analysis-sh">Bash script - run_analysis.sh</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#running-the-calculation">Running the calculation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#analyzing-results-from-electric">Analyzing Results from ELECTRIC</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">ELECTRIC</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Tutorial</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/tutorial.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="tutorial">
<h1>Tutorial<a class="headerlink" href="#tutorial" title="Link to this heading"></a></h1>
<p>This tutorial will walk you through using ELECTRIC to analyze the electric field in a small protein.
This tutorial assumes you have ELECTRIC and MDI-enabled Tinker installed.
If you don’t, navigate to the <a class="reference external" href="installation.html">installation</a> instructions.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<dl class="simple">
<dt>This tutorial will assume the following:</dt><dd><ul class="simple">
<li><p>You are able to run a molecular dynamics simulation using the Tinker software, or are familiar enough with molecular dynamics to follow along.</p></li>
<li><p>You have installed ELECTRIC and MDI-enabled Tinker. If you have not, see the <a class="reference external" href="installation.html">installation</a> instructions.</p></li>
<li><p>You are able to download or clone a directory from git.</p></li>
<li><p>You are familiar with bash scripts.</p></li>
</ul>
</dd>
</dl>
</div>
<p>To begin the tutorial, first make sure you have your <cite>electric</cite> environment activated:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda<span class="w"> </span>activate<span class="w"> </span>electric
</pre></div>
</div>
<p>The pdb code for this protein is <a class="reference external" href="https://www.rcsb.org/structure/1l2y">1l2y</a>, and you can see the structure below.
We have chosen a small protein for demonstrative purposes.
The image below shows only the protein, but our simulation is solvated.</p>
<center><div style="height: 300px; width: 300px; position: relative;" class="viewer_3Dmoljs" data-pdb=1l2y data-backgroundcolor="white"  data-style=cartoon:color=spectrum ></div></center><section id="running-an-electric-calculation">
<h2>Running an ELECTRIC calculation<a class="headerlink" href="#running-an-electric-calculation" title="Link to this heading"></a></h2>
<section id="preparing-files">
<h3>Preparing Files<a class="headerlink" href="#preparing-files" title="Link to this heading"></a></h3>
<p>To follow along with this tutorial, clone the <a class="reference external" href="http://www.github.com/janash/ELECTRIC_tutorial">tutorial repository</a>.
Included in this repository is folder called <code class="code docutils literal notranslate"><span class="pre">data</span></code>. The <code class="code docutils literal notranslate"><span class="pre">data</span></code> directory has all of the data you will need for this tutorial.</p>
<p>ELECTRIC is a post-processing analysis, meaning that you should first run your simulations using the AMOEBA forcefield and save the trajectory.
After you have a trajectory from Tinker simulation, use ELECTRIC to perform electric field analysis on that trajectory.
We will be analyzing the trajectory included in the tutorial repository, <code class="code docutils literal notranslate"><span class="pre">1l2y_npt.arc</span></code>.
This trajectory is a text file containing coordinates for a simulation that has already been run.</p>
<dl class="simple">
<dt>To get started with ELECTRIC, we will need to prepare our input files. We will need:</dt><dd><ul class="simple">
<li><p>a molecular dynamics trajectory</p></li>
<li><p>a Tinker input file (usually called a key file) which does not have settings for periodic boundaries or Ewald summation</p></li>
<li><p>the forcefield parameter file</p></li>
<li><p>a bash script file</p></li>
</ul>
</dd>
</dl>
<p>We already have the molecular dynamics trajectory, so let’s look at each of these additional files.</p>
<section id="simulation-parameter-file">
<h4>Simulation Parameter File<a class="headerlink" href="#simulation-parameter-file" title="Link to this heading"></a></h4>
<p>This file contains the force field parameters for the simulation you have run. If you are using this software for analysis, use the same force field you used to run the molecular dynamics simulation.
For this tutorial, the parameter file is <code class="code docutils literal notranslate"><span class="pre">amoebabio18.prm</span></code>. We will need this for our Tinker input file (next section).</p>
</section>
<section id="tinker-input-file">
<h4>Tinker input file<a class="headerlink" href="#tinker-input-file" title="Link to this heading"></a></h4>
<p>Next, we must prepare an input file which tells Tinker settings for our calculation.
This input file should be a modified version of the one which you used to run your initial simulation.
Consider the input file, <code class="code docutils literal notranslate"><span class="pre">tinker.key</span></code> used to obtain this trajectory.
The parameter file in the previous step is given on <code class="code docutils literal notranslate"><span class="pre">line</span> <span class="pre">1</span></code>.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span>parameters amoebabio18.prm
<span class="linenos"> 2</span>openmp-threads 16
<span class="linenos"> 3</span>
<span class="linenos"> 4</span>a-axis 50.00
<span class="linenos"> 5</span>b-axis 50.00
<span class="linenos"> 6</span>c-axis 50.00
<span class="linenos"> 7</span>
<span class="linenos"> 8</span>polar-eps 0.000010
<span class="linenos"> 9</span>polar-predict
<span class="linenos">10</span>polarization mutual
<span class="linenos">11</span>
<span class="linenos">12</span>
<span class="linenos">13</span>cutoff 10.0
<span class="linenos">14</span>ewald
<span class="linenos">15</span>neighbor-list
<span class="linenos">16</span>integrator beeman
<span class="linenos">17</span>
<span class="linenos">18</span>thermostat nose-hoover
<span class="linenos">19</span>barostat nose-hoover
<span class="linenos">20</span>
<span class="linenos">21</span>maxiter 8000
<span class="linenos">22</span>printout 1000
</pre></div>
</div>
<p>The input file used for this simulation uses periodic boundaries and an Ewald summation for electrostatics.
During a Tinker simulation using AMOEBA, electric fields are evaluated in order to calculate the induced dipoles at each step.
In order to get electric field contributions from specific residues, we must calculate the electric field using the real space interactions only (no periodic boundaries or Ewald).</p>
<p>Remove settings related to cutoffs (<code class="code docutils literal notranslate"><span class="pre">cutoff</span></code> keyword), periodic boundaries (<code class="code docutils literal notranslate"><span class="pre">a-axis</span></code>, <code class="code docutils literal notranslate"><span class="pre">b-axis</span></code>,:code:<cite>c-axis</cite>) and Ewald summation (<code class="code docutils literal notranslate"><span class="pre">ewald</span></code>).
You can also remove settings having to do with neighbor lists (<code class="code docutils literal notranslate"><span class="pre">neighbor-list</span></code>), as they are not needed and can cause an error for this calculation if included.</p>
<p>The modifed input file for ELECTRIC is given below.
This file is saved in the data directory with the name <code class="code docutils literal notranslate"><span class="pre">noewald.key</span></code>.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>parameters amoebabio18.prm
openmp-threads 16

polar-eps 0.000010
polar-predict
polarization mutual

integrator beeman

thermostat nose-hoover
barostat nose-hoover

maxiter 8000
printout 100
</pre></div>
</div>
</section>
<section id="bash-script-run-analysis-sh">
<h4>Bash script - run_analysis.sh<a class="headerlink" href="#bash-script-run-analysis-sh" title="Link to this heading"></a></h4>
<p>When you run analysis uisng ELECTRIC, ELECTRIC parses your given trajectory sends snapshots to Tinker for electric field calculation.
The MDI-enabled version of Tinker then calculates the electric field information for that snapshot.</p>
<p>You use ELECTRIC from the command line.
Consider the following bash script provided for analysis, <code class="code docutils literal notranslate"><span class="pre">run_analysis.sh</span></code>.
We will explain this script in detail.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1">#location of required codes</span>
<span class="linenos"> 2</span><span class="nv">DRIVER_LOC</span><span class="o">=</span>LOCATION/TO/ELECTRIC/ELECTRIC.py
<span class="linenos"> 3</span><span class="nv">TINKER_LOC</span><span class="o">=</span>LOCATION/TO/DYNAMIC/dynamic.x
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="c1">#remove old files</span>
<span class="linenos"> 6</span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>-d<span class="w"> </span>work<span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="linenos"> 7</span>rm<span class="w"> </span>-r<span class="w"> </span>work
<span class="linenos"> 8</span><span class="k">fi</span>
<span class="linenos"> 9</span>
<span class="linenos">10</span><span class="c1">#create work directory</span>
<span class="linenos">11</span>cp<span class="w"> </span>-r<span class="w"> </span>data<span class="w"> </span>work
<span class="linenos">12</span><span class="nb">cd</span><span class="w"> </span>work
<span class="linenos">13</span>
<span class="linenos">14</span><span class="c1">#set the number of threads</span>
<span class="linenos">15</span><span class="nb">export</span><span class="w"> </span><span class="nv">OMP_NUM_THREADS</span><span class="o">=</span><span class="m">2</span>
<span class="linenos">16</span>
<span class="linenos">17</span><span class="c1">#launch MDI enabled Tinker</span>
<span class="linenos">18</span><span class="si">${</span><span class="nv">TINKER_LOC</span><span class="si">}</span><span class="w"> </span>1l2y<span class="w"> </span>-k<span class="w"> </span>no_ewald.key<span class="w"> </span>-mdi<span class="w"> </span><span class="s2">&quot;-role ENGINE -name NO_EWALD -method TCP -port 8022 -hostname localhost&quot;</span><span class="w">  </span><span class="m">10</span><span class="w"> </span><span class="m">1</span>.0<span class="w"> </span><span class="m">0</span>.002<span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">300</span>.00<span class="w"> </span>&gt;<span class="w"> </span>no_ewald.log<span class="w"> </span><span class="p">&amp;</span>
<span class="linenos">19</span>
<span class="linenos">20</span><span class="c1">#launch driver</span>
<span class="linenos">21</span>python<span class="w"> </span><span class="si">${</span><span class="nv">DRIVER_LOC</span><span class="si">}</span><span class="w"> </span>-snap<span class="w"> </span>1l2y_npt.arc<span class="w"> </span>-probes<span class="w"> </span><span class="s2">&quot;93 94&quot;</span><span class="w"> </span>-mdi<span class="w"> </span><span class="s2">&quot;-role DRIVER -name driver -method TCP -port 8022&quot;</span><span class="w"> </span>--byres<span class="w"> </span>1l2y_solvated.pdb<span class="w">  </span>--equil<span class="w"> </span><span class="m">120</span><span class="w"> </span>--stride<span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="p">&amp;</span>
<span class="linenos">22</span>
<span class="linenos">23</span><span class="nb">wait</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For this tutorial, we use the approach of having all data needed for analysis in a directory called <cite>data</cite>. During analysis, we copy everything from <code class="code docutils literal notranslate"><span class="pre">data</span></code> into a folder <code class="code docutils literal notranslate"><span class="pre">work</span></code>. This part of the tutorial is stylistic. The authors prefer this method to keep files separated, and original files unaltered.</p>
</div>
<p>In lines <code class="code docutils literal notranslate"><span class="pre">2</span></code> and <code class="code docutils literal notranslate"><span class="pre">3</span></code>, you should change the location to your installed ELECTRIC.py file and MDI-enabled <code class="code docutils literal notranslate"><span class="pre">dynamic.x</span></code>.
Recall from the installation instructions that you can find these in the ELECTRIC directory in the files <code class="code docutils literal notranslate"><span class="pre">ELECTRIC/test/locations/ELECTRIC</span></code> and <code class="code docutils literal notranslate"><span class="pre">ELECTRIC/test/locations/Tinker_ELECTRIC</span></code>.</p>
<p>The next section removes the folder called <code class="code docutils literal notranslate"><span class="pre">work</span></code> if it exists.
This bash script is written to put all analysis files into a folder called <code class="code docutils literal notranslate"><span class="pre">work</span></code> to keep our original files clean.</p>
<p>MDI-enabled Tinker is launched on <code class="code docutils literal notranslate"><span class="pre">line</span> <span class="pre">18</span></code> with the command</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="si">${</span><span class="nv">TINKER_LOC</span><span class="si">}</span><span class="w"> </span>1l2y<span class="w"> </span>-k<span class="w"> </span>no_ewald.key<span class="w"> </span>-mdi<span class="w"> </span><span class="s2">&quot;-role ENGINE -name NO_EWALD -method TCP -port 8022 -hostname localhost&quot;</span><span class="w">  </span><span class="m">10</span><span class="w"> </span><span class="m">1</span>.0<span class="w"> </span><span class="m">0</span>.002<span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">300</span>.00<span class="w"> </span>&gt;<span class="w"> </span>no_ewald.log<span class="w"> </span><span class="p">&amp;</span>
</pre></div>
</div>
<p>The first thing on this line, <code class="code docutils literal notranslate"><span class="pre">${TINKER_LOC}</span></code> fills in the location for <code class="code docutils literal notranslate"><span class="pre">dynamic.x</span></code> which you put in line 2.
Next, <cite>1l2y</cite> is the file name (without an extension) of the xyz file for this calculation (provided vile <code class="code docutils literal notranslate"><span class="pre">12ly.xyz</span></code>).
You should have this from your original simulation.
However, make sure that there is no box information on line two of this <code class="code docutils literal notranslate"><span class="pre">xyz</span></code> file, as this could cause Tinker to use periodic boundaries.
Next, we give the input file (key file) we have prepared in the previous step using <code class="code docutils literal notranslate"><span class="pre">-k</span> <span class="pre">noewald.key</span></code>.
Then, we give our MDI options.
The given options should work for most analysis. After the MDI options are some Tinker input options.
For our analysis, it will not really matter what we put here since we are running calculations on one snapshot at a time.
However, you must have these present for Tinker to run. Very importantly, note the ampersand (<code class="code docutils literal notranslate"><span class="pre">&amp;</span></code>) at the end of this line. This will launch Tinker in the background, where it will be waiting for commands from ELECTRIC.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Make sure that there is no box information on line two of the <code class="code docutils literal notranslate"><span class="pre">xyz</span></code> file used to launch MDI-enabled Tinker. This could cause Tinker to use periodic boundaries.</p>
</div>
<p>In the next command (<code class="code docutils literal notranslate"><span class="pre">line</span> <span class="pre">21</span></code>), we launch ELECTRIC.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span><span class="si">${</span><span class="nv">DRIVER_LOC</span><span class="si">}</span><span class="w"> </span>-snap<span class="w"> </span>1l2y_npt.arc<span class="w"> </span>-probes<span class="w"> </span><span class="s2">&quot;78 93 94&quot;</span><span class="w">  </span>-mdi<span class="w"> </span><span class="s2">&quot;-role DRIVER -name driver -method TCP -port 8022&quot;</span><span class="w"> </span>--byres<span class="w"> </span>1l2y_solvated.pdb<span class="w">  </span>--equil<span class="w"> </span><span class="m">120</span><span class="w"> </span>--stride<span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="p">&amp;</span>
</pre></div>
</div>
<p>Here, we first give the location of our ELECTRIC driver.
We indicate our trajectory file using the <cite>-snap</cite> argument with the filename to analyze, followed by MDI options.</p>
<section id="probe-atoms">
<h5>Probe Atoms<a class="headerlink" href="#probe-atoms" title="Link to this heading"></a></h5>
<p>To run an ELECTRIC calculation, you must give the indices of your probe atoms.
The probe atoms are the atoms which are used as ‘probes’ for the electric field. ELECTRIC reports the projected total electric field at the midpoint between all probe atom pairs.
This allows you to calculate electric fields along bonds <a class="reference external" href="https://pubs.acs.org/doi/10.1021/jacs.9b05323">as reported in literature</a>.</p>
<p>You should obtain the number of the probe atoms from the <code class="code docutils literal notranslate"><span class="pre">xyz</span></code> file you use to launch MDI-enabled Tinker. Note that the index you use here should match the number given in the first column of your xyz file. The projection of the electric field at the midpoint of these two atoms will be reported for each analyzed frame. If you indicate more than two probes, all pairwise fields will be reported (ie, if using “78 93 94”, you will get “78 and 93”, “78 and 94” and “93 and 94”). You can see the atoms we have chosen as probes highlighted below:</p>
<center><div style="height: 300px; width: 300px; position: relative;" class="viewer_3Dmoljs" data-pdb=1l2y data-backgroundcolor="0xffffff"  data-style=cartoon:color=spectrum  data-style1=sphere  data-select1=serial:78,93,94 ></div></center><p>The argument <cite>–byres</cite> gives information to ELECTRIC about how we would like the electric field reported. When we use the <code class="code docutils literal notranslate"><span class="pre">--byres</span></code> argument, it should be followed by a pdb which contains residue information for the system you are studying. When using this argument, electric field contributions from each residue will be reported. Other options are <code class="code docutils literal notranslate"><span class="pre">--byatom</span></code> top report electric field contributions from each atom, and <code class="code docutils literal notranslate"><span class="pre">--bymol</span></code> to report electric field contributions from each molecule.</p>
<p>When using <code class="code docutils literal notranslate"><span class="pre">--byres</span></code>, solvent should be at the end of the pdb and xyz files. Solvent (ions and water) will be grouped together into a single residue.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>When using the <code class="code docutils literal notranslate"><span class="pre">byres</span></code> option, you should verify that the residues in your pdb file match what you expect for your xyz file. You can do this with the utility function <code class="code docutils literal notranslate"><span class="pre">residue_report.py</span></code>. ELECTRIC will check that the <code class="code docutils literal notranslate"><span class="pre">xyz</span></code> and <code class="code docutils literal notranslate"><span class="pre">pdb</span></code> have the same number of atoms. However, all residue information will come from the PDB, so make sure the residue information in your provided PDB is as you expect.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The utility script <code class="code docutils literal notranslate"><span class="pre">residue_report.py</span></code> is provided in the same directory as <code class="code docutils literal notranslate"><span class="pre">ELECTRIC.py</span></code>. To use it,</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>residue_report.py<span class="w"> </span>PDB_FILENAME
</pre></div>
</div>
<p>This will output a report which gives the residue number, the atom index on which the residue starts and the residue name. When using <code class="code docutils literal notranslate"><span class="pre">--byres</span></code>, you should first verify that your pdb file has residues defined as you want and matches your xyz file and trajectory. ELECTRIC only checks that the pdb and xyz file have the same number of atoms, it does not check atom identity or order. For this tutorial, our output is</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Found 12199 atoms and 21 residues.
Residue Number       Starting atom        Residue Name
        1                    1                   ASN
        2                    17                  LEU
        3                    36                  TYR
        4                    57                  ILE
        5                    76                  GLN
        6                    93                  TRP
        7                   117                  LEU
        8                   136                  LYS
        9                   158                  ASP
        10                  170                  GLY
        11                  177                  GLY
        12                  184                  PRO
        13                  198                  SER
        14                  209                  SER
        15                  220                  GLY
        16                  227                  ARG
        17                  251                  PRO
        18                  265                  PRO
        19                  279                  PRO
        20                  293                  SER
        21                  305                solvent
</pre></div>
</div>
</div>
<p>Finally, we give arguments which gives information about the frame we want to analyze. Using <cite>–equil 120</cite> tells ELECTRIC to skip the first 120 frames for analysis, and <code class="code docutils literal notranslate"><span class="pre">--stride</span> <span class="pre">2</span></code> tells ELECTRIC to analyze every other frame after 120.</p>
</section>
</section>
</section>
<section id="running-the-calculation">
<h3>Running the calculation<a class="headerlink" href="#running-the-calculation" title="Link to this heading"></a></h3>
<p>After you have prepared your files, you can run analysis using the command</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./run_analysis.sh<span class="w"> </span>&gt;<span class="w"> </span>analysis.out<span class="w"> </span><span class="p">&amp;</span>
</pre></div>
</div>
<p>This will launch ELECTRIC. Again, using the ampersand <code class="code docutils literal notranslate"><span class="pre">&amp;</span></code> will run this in the background. Now, you just have to wait for your analysis to finish running.</p>
</section>
</section>
<section id="analyzing-results-from-electric">
<h2>Analyzing Results from ELECTRIC<a class="headerlink" href="#analyzing-results-from-electric" title="Link to this heading"></a></h2>
<p>ELECTRIC will output a csv file with the electric field information <code class="code docutils literal notranslate"><span class="pre">proj_totfield.csv</span></code> in the <code class="code docutils literal notranslate"><span class="pre">work</span></code> folder. Below, we show results (numbers rounded for clarity) for probes 78 and 93 from <code class="code docutils literal notranslate"><span class="pre">proj_totfield.csv</span></code>. When these numbers are reported, they are the electric field in Mv/cm projected along the vector pointing from atom 1 to atom 2 due to each residue.</p>
<table id='table-0' class='display'>
	<thead>
		<tr>
			<th></th>
			<th>78 and 93 - frame 122</th>
			<th>78 and 93 - frame 124</th>
			<th>78 and 93 - frame 126</th>
			<th>78 and 93 - frame 128</th>
			<th>78 and 93 - frame 130</th>
</tr></thead>
<tbody>
	<tr>
			<td>residue 1</td>
			<td>-2.395</td>
			<td>-4.253</td>
			<td>-2.878</td>
			<td>-3.259</td>
			<td>-4.556</td>
	</tr>
	<tr>
			<td>residue 2</td>
			<td>19.443</td>
			<td>14.662</td>
			<td>25.377</td>
			<td>24.813</td>
			<td>23.909</td>
	</tr>
	<tr>
			<td>residue 3</td>
			<td>9.765</td>
			<td>18.434</td>
			<td>16.398</td>
			<td>19.663</td>
			<td>10.279</td>
	</tr>
	<tr>
			<td>residue 4</td>
			<td>-8.864</td>
			<td>0.499</td>
			<td>-3.138</td>
			<td>-5.830</td>
			<td>-4.440</td>
	</tr>
	<tr>
			<td>residue 5</td>
			<td>9.338</td>
			<td>1.112</td>
			<td>-0.795</td>
			<td>-1.922</td>
			<td>-1.382</td>
	</tr>
	<tr>
			<td>residue 6</td>
			<td>-10.355</td>
			<td>-9.994</td>
			<td>-11.356</td>
			<td>-15.802</td>
			<td>-7.026</td>
	</tr>
	<tr>
			<td>residue 7</td>
			<td>1.301</td>
			<td>-1.442</td>
			<td>-2.552</td>
			<td>-3.883</td>
			<td>-4.978</td>
	</tr>
	<tr>
			<td>residue 8</td>
			<td>42.529</td>
			<td>33.426</td>
			<td>39.153</td>
			<td>34.288</td>
			<td>41.881</td>
	</tr>
	<tr>
			<td>residue 9</td>
			<td>-33.997</td>
			<td>-21.626</td>
			<td>-16.939</td>
			<td>-29.022</td>
			<td>-23.161</td>
	</tr>
	<tr>
			<td>residue 10</td>
			<td>0.040</td>
			<td>0.292</td>
			<td>-0.031</td>
			<td>-0.242</td>
			<td>0.084</td>
	</tr>
	<tr>
			<td>residue 11</td>
			<td>-2.078</td>
			<td>-1.582</td>
			<td>-2.987</td>
			<td>-2.321</td>
			<td>-2.687</td>
	</tr>
	<tr>
			<td>residue 12</td>
			<td>-0.029</td>
			<td>-0.007</td>
			<td>0.074</td>
			<td>-0.167</td>
			<td>0.032</td>
	</tr>
	<tr>
			<td>residue 13</td>
			<td>-0.103</td>
			<td>0.085</td>
			<td>0.269</td>
			<td>0.445</td>
			<td>0.053</td>
	</tr>
	<tr>
			<td>residue 14</td>
			<td>-1.414</td>
			<td>-1.112</td>
			<td>-2.235</td>
			<td>-0.719</td>
			<td>-0.887</td>
	</tr>
	<tr>
			<td>residue 15</td>
			<td>-0.882</td>
			<td>-0.799</td>
			<td>-0.644</td>
			<td>-0.667</td>
			<td>-0.819</td>
	</tr>
	<tr>
			<td>residue 16</td>
			<td>-1.735</td>
			<td>-1.047</td>
			<td>-3.305</td>
			<td>-0.146</td>
			<td>0.879</td>
	</tr>
	<tr>
			<td>residue 17</td>
			<td>2.504</td>
			<td>2.084</td>
			<td>2.682</td>
			<td>2.390</td>
			<td>3.073</td>
	</tr>
	<tr>
			<td>residue 18</td>
			<td>-1.195</td>
			<td>-1.988</td>
			<td>-1.342</td>
			<td>-1.743</td>
			<td>-1.556</td>
	</tr>
	<tr>
			<td>residue 19</td>
			<td>-1.848</td>
			<td>-3.031</td>
			<td>-1.783</td>
			<td>-2.240</td>
			<td>-2.890</td>
	</tr>
	<tr>
			<td>residue 20</td>
			<td>7.817</td>
			<td>8.155</td>
			<td>7.651</td>
			<td>7.944</td>
			<td>8.955</td>
	</tr>
	<tr>
			<td>residue 21</td>
			<td>12.086</td>
			<td>4.212</td>
			<td>-6.339</td>
			<td>1.039</td>
			<td>-4.052</td>
	</tr>
	</tbody></table><script>

    $(document).ready( function () {
            $('#table-0').DataTable({"ordering": false, "paging": false});} );

                            
    </script><br><p>You are free to analyze this as you like, but we recommend using <a class="reference external" href="https://pandas.pydata.org/">pandas</a> to process the csv file. A script to perform averaging of probe pairs across frames is provided in <code class="code docutils literal notranslate"><span class="pre">ELECTRIC/sample_analysis/calculate_average.py</span></code>. For example, you can run this script</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>PATH/TO/calculate_average.py<span class="w"> </span>-filename<span class="w"> </span>work/proj_totfield.csv
</pre></div>
</div>
<p>This will output a file with the average projected field for each residue pair. In our case, three files should be output: <code class="code docutils literal notranslate"><span class="pre">78</span> <span class="pre">_and_93.csv</span></code>, <code class="code docutils literal notranslate"><span class="pre">78_and_94.csv</span></code>, and <code class="code docutils literal notranslate"><span class="pre">93_and_94.csv</span></code>. The output for the <code class="code docutils literal notranslate"><span class="pre">78_and_93.csv</span></code> is shown in the table below:</p>
<table id='table-1' class='display'>
	<thead>
		<tr>
			<th>residue</th>
			<th>78 and 93</th>
			<th>standard deviation</th>
</tr></thead>
<tbody>
	<tr>
			<td>1.000</td>
			<td>-3.468</td>
			<td>0.914</td>
	</tr>
	<tr>
			<td>2.000</td>
			<td>21.641</td>
			<td>4.547</td>
	</tr>
	<tr>
			<td>3.000</td>
			<td>14.908</td>
			<td>4.614</td>
	</tr>
	<tr>
			<td>4.000</td>
			<td>-4.354</td>
			<td>3.448</td>
	</tr>
	<tr>
			<td>5.000</td>
			<td>1.270</td>
			<td>4.653</td>
	</tr>
	<tr>
			<td>6.000</td>
			<td>-10.907</td>
			<td>3.176</td>
	</tr>
	<tr>
			<td>7.000</td>
			<td>-2.311</td>
			<td>2.421</td>
	</tr>
	<tr>
			<td>8.000</td>
			<td>38.255</td>
			<td>4.221</td>
	</tr>
	<tr>
			<td>9.000</td>
			<td>-24.949</td>
			<td>6.649</td>
	</tr>
	<tr>
			<td>10.000</td>
			<td>0.029</td>
			<td>0.193</td>
	</tr>
	<tr>
			<td>11.000</td>
			<td>-2.331</td>
			<td>0.544</td>
	</tr>
	<tr>
			<td>12.000</td>
			<td>-0.019</td>
			<td>0.091</td>
	</tr>
	<tr>
			<td>13.000</td>
			<td>0.150</td>
			<td>0.212</td>
	</tr>
	<tr>
			<td>14.000</td>
			<td>-1.273</td>
			<td>0.597</td>
	</tr>
	<tr>
			<td>15.000</td>
			<td>-0.762</td>
			<td>0.103</td>
	</tr>
	<tr>
			<td>16.000</td>
			<td>-1.071</td>
			<td>1.588</td>
	</tr>
	<tr>
			<td>17.000</td>
			<td>2.546</td>
			<td>0.366</td>
	</tr>
	<tr>
			<td>18.000</td>
			<td>-1.565</td>
			<td>0.315</td>
	</tr>
	<tr>
			<td>19.000</td>
			<td>-2.359</td>
			<td>0.579</td>
	</tr>
	<tr>
			<td>20.000</td>
			<td>8.104</td>
			<td>0.510</td>
	</tr>
	<tr>
			<td>21.000</td>
			<td>1.389</td>
			<td>7.277</td>
	</tr>
	</tbody></table><script>

    $(document).ready( function () {
            $('#table-1').DataTable({"ordering": false, "paging": false});} );

                            
    </script><br></section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="usage.html" class="btn btn-neutral float-left" title="Usage" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020-2023, Jessica A. Nash, Taylor A. Barnes, Valerie Vaissier Welborn.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>